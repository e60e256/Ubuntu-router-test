services:
  router1:
    image: netshoot_router:e60e256
    privileged: true
    cap_add:
      - NET_ADMIN
    command: /bin/sh -c "/app/network_config.sh; while true; do sleep 10000; done"
    networks:
      general-link:
      tunnel-2210:
        ipv6_address: 2001:200:0:1cdc:1e60::2210:2/96
      tunnel-2220:
        ipv6_address: 2001:200:0:1cdc:1e60::2220:2/96
  
  ping-container-general:
    image: netshoot:e60e256
    command: /bin/sh -c "while true; do sleep 10000; done"
    networks:
      general-link:
        ipv6_address: 2001:200:0:1cdc:1e60::2110:2/96

  ping-container-tunnel-2210:
    image: netshoot:e60e256
    command: /bin/sh -c "while true; do sleep 10000; done"
    networks:
      tunnel-2210:
        ipv6_address: 2001:200:0:1cdc:1e60::2210:1/96

  ping-container-tunnel-2220:
    image: netshoot:e60e256
    command: /bin/sh -c "while true; do sleep 10000; done"
    networks:
      tunnel-2220:
        ipv6_address: 2001:200:0:1cdc:1e60::2220:1/96


networks:
  general-link:
    enable_ipv6: true
    ipam:
      driver: default
      config:
        - subnet: 2001:200:0:1cdc:1e60::2110:0/96
          ip_range: 2001:200:0:1cdc:1e60::2110:0/96
          gateway: 2001:200:0:1cdc:1e60::2110:1
    
  tunnel-2210:
    enable_ipv6: true
    ipam:
      driver: default
      config:
        - subnet: 2001:200:0:1cdc:1e60::2210:0/96
          ip_range: 2001:200:0:1cdc:1e60::2210:0/96
          gateway: 2001:200:0:1cdc:1e60::2210:1
  
  tunnel-2220:
    enable_ipv6: true
    ipam:
      driver: default
      config:
        - subnet: 2001:200:0:1cdc:1e60::2220:0/96
          ip_range: 2001:200:0:1cdc:1e60::2220:0/96
          gateway: 2001:200:0:1cdc:1e60::2220:1
